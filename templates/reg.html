<!DOCTYPE html>
<html>
    <head>
        <title>Registration Page</title>
        //using Bootstrap CDN for stylig 
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    </head>
    <body class ="bg-light d-flex justify-content-center align-items-center min-vh-100">
        <div class = "container border-0 shadow-sm card p-4" style = "max-width : 400 px ;">
            <h2 class = "text-center mb-4">Register</h2>

            <input 
            type="text"
            id="username"
            class = "form-control mb-3"
            placeholder ="Create Username" >

            <input 
            type = "password"
            id = "pass"
            class = "form-control mb-3"
            placeholder = "Create Password" >

            <button
            onclick = "handleRegister()"
            class  = "btn btn-primary w-100">Register</button>

            <a href="/login"
            class = "btn btn-link w-100">
            Already have an account?</a>

        </div>

        <script>
            async function handleRegister(){
                const username = document.getElementById("username").value;
                const password = document.getElementById("pass").value;

                const res = await fetch("/api/register", {
                    method : "POST",
                    headers : {
                        "Content-Type" : "application/json"
                    },
                    body : JSON.stringify({
                        username: username,
                        password: password
                    })
                },
                )
                if (res.ok){
                    window.location.href = "/dashboard";
                }
                else {
                    alert("Registration failed. Please try again.");
                }
            }
        </script>
        
    </body>"
</html>
