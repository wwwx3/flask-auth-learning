<!DOCTYPE html>
<html> 
<head>
    <title>Login Page</title>
    //Using Bootstrap CDN for styling
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class ="bg-light d-flex justify-content-center align-items-center">
    <div class="container border-0 shadow-sm card p-4" style="max-width: 400px;">
        <h2 class="text-center mb-4">Login</h2>

        <input 
        type="text"
        id = "user"
        class="form-control mb-3"
        placeholder="Username">

        <input 
        type="password"
        id = "pass"
        class="form-control mb-3"
        placeholder="Password">

        <button 
        onclick="handleLogin()"
        class="btn btn-primary w-100">Login</button>

        <a href="/register" 
        class="btn btn-link w-100">
        Create an account</a>
    
    </div>
    
    <script>
        async function handleLogin() {
            const username = document.getElementById('user').value;
            const password = document.getElementById('pass').value;

            const res = await fetch('/api/login' ,{
                method: 'POST',
                headers:{
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    username: username,
                    password: password
                })
            },
            )
            if (res.ok){
                window.location.href ='/dashboard';
            } 
            else {
                alert('Login failed. Please check your credentials and try again.');
            }
        } 
    </script>
</body>
</html>
